# Renfield Satellite Configuration
# Copy this file to /opt/renfield-satellite/config/satellite.yaml

# Satellite identification
satellite:
  id: "sat-wohnzimmer"      # Unique ID for this satellite
  room: "Wohnzimmer"        # Human-readable room name
  language: "de"            # Language for STT/TTS (e.g., 'de', 'en')

# Renfield server connection
# If url is not specified, auto-discovery will find the server automatically
server:
  url: "ws://demeter.local:8000/ws/satellite"  # Manual WebSocket URL (optional)
  auto_discover: true         # Use zeroconf to find server automatically
  discovery_timeout: 10       # Seconds to wait for discovery
  reconnect_interval: 5       # Seconds between reconnect attempts
  heartbeat_interval: 30      # Seconds between heartbeats
  # Authentication (only needed if server has WS_AUTH_ENABLED=true)
  auth_enabled: false         # Set to true when server requires authentication
  # auth_token: "..."         # Pre-configured token (optional, will auto-fetch if not set)

# Audio settings
audio:
  sample_rate: 16000         # Hz (must match wake word model)
  chunk_size: 1280           # Samples per chunk (~80ms at 16kHz)
  channels: 1                # Mono
  device: "plughw:1,0"       # ALSA capture device
  playback_device: "plughw:1,0"  # ALSA playback device

# Wake word detection
wakeword:
  model: "alexa"         # Wake word model name (okay_nabu, hey_jarvis, etc.)
  threshold: 0.5             # Detection threshold (0.0-1.0)
  models_path: "/opt/renfield-satellite/models"
  refractory_seconds: 2.0    # Cooldown before re-triggering same wake word
  # stop_words:              # Words that cancel ongoing interaction (optional)
  #   - "stop"
  #   - "cancel"
  #   - "nevermind"

# Voice Activity Detection (for end-of-speech)
vad:
  backend: "webrtc"             # "rms" (simple), "webrtc" (fast), or "silero" (ML-based, best)
  silence_threshold: 350     # RMS threshold (for RMS backend, vorher 500)
  silence_duration_ms: 1200  # How long silence to end recording (vorher 1500)
  max_recording_seconds: 20  # Maximum recording length (vorher 15)
  webrtc_aggressiveness: 2  # WebRTC VAD aggressiveness 0-3 (higher = more aggressive)
  # silero_threshold: 0.5     # Silero VAD threshold 0-1 (higher = stricter)
  # silero_model_path: "/opt/renfield-satellite/models/silero_vad.onnx"

# LED settings (ReSpeaker HAT)
led:
  brightness: 20             # 0-31 (hardware limit)
  num_leds: 3                # Number of APA102 LEDs

# Button settings (ReSpeaker HAT)
button:
  gpio_pin: 17               # BCM GPIO pin number
  debounce_ms: 50            # Debounce time